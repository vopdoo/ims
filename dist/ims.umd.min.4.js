(("undefined"!==typeof self?self:this)["webpackJsonpims"]=("undefined"!==typeof self?self:this)["webpackJsonpims"]||[]).push([[4],{"4b7b":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"100%"}},[a("div",{staticClass:"demo-split"},[a("Split",{model:{value:t.split1,callback:function(e){t.split1=e},expression:"split1"}},[a("div",{staticClass:"demo-split-left-pane",attrs:{slot:"left"},slot:"left"},[a("Tree",{ref:"leftDeptTree",attrs:{data:t.departments,render:t.renderContent,"show-checkbox":"",multiple:""},on:{"on-toggle-expand":t.handleToggleExpand,"on-select-change":t.handleDepartmentSelectChange}})],1),a("div",{staticClass:"demo-split-right-pane",attrs:{slot:"right"},slot:"right"},[a("Row",{attrs:{type:"flex",justify:"space-between",align:"top"}},[a("Col",{attrs:{span:"20"}},[a("Form",{staticClass:"search-form",attrs:{model:t.searchForm,inline:""}},[a("FormItem",[a("Select",{staticStyle:{width:"100px"},attrs:{clearable:"",placeholder:"状态"},model:{value:t.searchForm.status,callback:function(e){t.$set(t.searchForm,"status",e)},expression:"searchForm.status"}},t._l(t.statusList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v("\n                                        "+t._s(e.label)+"\n                                    ")])}),1)],1),a("FormItem",[a("Select",{staticStyle:{width:"250px"},attrs:{multiple:"",placeholder:"角色"},model:{value:t.searchForm.role_ids,callback:function(e){t.$set(t.searchForm,"role_ids",e)},expression:"searchForm.role_ids"}},t._l(t.roles.data,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v("\n                                        "+t._s(e.name)+"\n                                    ")])}),1)],1),a("FormItem",[a("Input",{staticClass:"filter-kws",attrs:{search:"",placeholder:"姓名/昵称/姓名/邮箱"},on:{"on-search":t.handleSearch},model:{value:t.searchForm.keywords,callback:function(e){t.$set(t.searchForm,"keywords",e)},expression:"searchForm.keywords"}})],1)],1)],1),a("Col",{staticClass:"list-tlbr",attrs:{span:"4"}},[a("Button",{on:{click:t.handleCreate}},[t._v("添加")])],1)],1),a("Table",{attrs:{columns:t.columns,data:t.admins.data,border:"",loading:t.tblLoading},scopedSlots:t._u([{key:"name",fn:function(e){var s=e.row,n=e.index;return[t.editIndex===n?a("Input",{attrs:{type:"text"},model:{value:t.editName,callback:function(e){t.editName=e},expression:"editName"}}):a("span",[t._v(t._s(s.name))])]}},{key:"departments",fn:function(e){var s=e.row;e.index;return[s.departments.length?a("span",t._l(s.departments,function(e,s){return a("span",{key:s},[t._v(t._s(e.name)+",")])}),0):a("span",[t._v("-")])]}},{key:"nick_name",fn:function(e){var s=e.row,n=e.index;return[t.editIndex===n?a("Input",{attrs:{type:"text"},model:{value:t.editAge,callback:function(e){t.editAge=e},expression:"editAge"}}):a("span",[t._v(t._s(s.nick_name))])]}},{key:"email",fn:function(e){var s=e.row,n=e.index;return[t.editIndex===n?a("Input",{attrs:{type:"text"},model:{value:t.editBirthday,callback:function(e){t.editBirthday=e},expression:"editBirthday"}}):a("span",[t._v(t._s(s.email))])]}},{key:"status",fn:function(e){var s=e.row;e.index;return[a("i-switch",{attrs:{size:"large"},model:{value:s.status,callback:function(e){t.$set(s,"status",e)},expression:"row.status"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("启用")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("禁用")])])]}},{key:"action",fn:function(e){var s=e.row,n=e.index;return[a("Button",{attrs:{size:"small",type:"text"},on:{click:function(e){return t.handleEdit(s,n)}}},[t._v("编辑")]),a("Poptip",{attrs:{confirm:"",transfer:!0,title:"确认要删除此用户？"},on:{"on-ok":function(e){return t.handleDeleteUserOk(s)},"on-cancel":t.handleDeleteUserCancel}},[a("Button",{attrs:{size:"small",type:"text"}},[t._v("删除")])],1)]}},{key:"created_at",fn:function(t){var e=t.row;t.index;return a("TableDatetime",{staticStyle:{width:"500px"},attrs:{datetime:e.created_at}})}},{key:"updated_at",fn:function(t){var e=t.row;t.index;return a("TableDatetime",{attrs:{datetime:e.updated_at}})}}])}),a("Row",{staticStyle:{"margin-top":"10px"},attrs:{type:"flex"}},[a("Col",{attrs:{span:"8"}}),a("Col",{staticClass:"list-tb-right",attrs:{span:"16"}},[a("Page",{attrs:{total:t.admins.meta.total,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":t.handlePageChange,"on-page-size-change":t.handlePageSizeChange}})],1)],1)],1)])],1),a("Modal",{attrs:{title:t.cetitle,loading:t.celoading,"class-name":"ce-modal",width:"600","mask-closable":!1,scrollable:!0},on:{"on-ok":t.handleCeOk,"on-cancel":t.handleCeCancel},model:{value:t.hasceing,callback:function(e){t.hasceing=e},expression:"hasceing"}},[a("Form",{attrs:{model:t.fmData,"label-position":"top"}},[a("Row",{attrs:{gutter:32}},[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"姓名"}},[a("Input",{attrs:{placeholder:"姓名"},model:{value:t.fmData.name,callback:function(e){t.$set(t.fmData,"name",e)},expression:"fmData.name"}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"昵称"}},[a("Input",{attrs:{placeholder:"昵称"},model:{value:t.fmData.nick_name,callback:function(e){t.$set(t.fmData,"nick_name",e)},expression:"fmData.nick_name"}})],1)],1)],1),a("Row",{attrs:{gutter:32}},[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"部门"}},[a("Input",{attrs:{placeholder:"请选择部门"},model:{value:t.fmData.department_names,callback:function(e){t.$set(t.fmData,"department_names",e)},expression:"fmData.department_names"}},[a("Poptip",{attrs:{slot:"suffix",transfer:!0,title:"选择部门 (可多选)"},on:{"on-popper-hide":t.handleDepartmentChange},slot:"suffix"},[a("Icon",{attrs:{type:"md-checkbox-outline"}}),a("div",{staticStyle:{"padding-bottom":"16px",width:"200px",height:"300px","overflow-y":"auto"},attrs:{slot:"content"},slot:"content"},[a("Tree",{attrs:{data:t.depts,"check-strictly":!0,render:t.renderContent,"show-checkbox":""},on:{"on-check-change":t.handleDepartmentTreeChange,"on-toggle-expand":t.handleToggleExpand}})],1)],1)],1)],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"邮箱"}},[a("Input",{attrs:{placeholder:"邮箱"},model:{value:t.fmData.email,callback:function(e){t.$set(t.fmData,"email",e)},expression:"fmData.email"}})],1)],1)],1),a("FormItem",{attrs:{label:"角色"}},[a("Select",{attrs:{multiple:"",placeholder:"请选择角色"},model:{value:t.fmData.role_ids,callback:function(e){t.$set(t.fmData,"role_ids",e)},expression:"fmData.role_ids"}},t._l(t.roles.data,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v("\n                        "+t._s(e.name)+"\n                    ")])}),1)],1),a("Row",{attrs:{gutter:32}},[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"排序"}},[a("InputNumber",{attrs:{max:9999,min:0,placeholder:"排序值 越小越靠前"},model:{value:t.fmData.sort,callback:function(e){t.$set(t.fmData,"sort",e)},expression:"fmData.sort"}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"状态"}},[a("i-switch",{attrs:{size:"large"},model:{value:t.fmData.status,callback:function(e){t.$set(t.fmData,"status",e)},expression:"fmData.status"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])])],1)],1)],1),a("FormItem",{attrs:{label:"密码"}},[a("Input",{attrs:{"element-id":"password",type:t.passwordInputType,icon:t.passwordInputSuffixIcon,placeholder:"密码"},on:{"on-click":t.handleTogglePassword},model:{value:t.fmData.password,callback:function(e){t.$set(t.fmData,"password",e)},expression:"fmData.password"}})],1),a("FormItem",{attrs:{label:"排班计划"}},[a("Table",{attrs:{columns:t.columns1,data:t.data1}})],1),a("FormItem",{attrs:{label:"备注"}},[a("Input",{attrs:{type:"textarea",rows:4,placeholder:"备注"},model:{value:t.fmData.remark,callback:function(e){t.$set(t.fmData,"remark",e)},expression:"fmData.remark"}})],1)],1)],1)],1)},n=[],i=a("2f62"),l=a("724a"),o={name:"Admin",components:{TableDatetime:l["a"]},async created(){await this.$store.dispatch("department/lists",{is_show_tree:1,has_admins:1}),await this.$store.dispatch("role/lists",{status:1,per_page:1e3}),await this.$store.dispatch("admin/lists"),await this.$store.dispatch("system/changeSpining",{spining:!1})},computed:{...Object(i["c"])({admins:"admin/admins",statusList:"admin/statusList",columns:"admin/columns",departments:"department/nodes",depts:"department/depts",roles:"role/lists"})},data(){return{columns1:[{title:"时间段",key:"name"},{title:"状态",key:"age"}],data1:[{name:"2019-04-01 08:00 - 2019-04-01 09:00",age:"正常"},{name:"2019-04-01 13:00 - 2019-04-01 17:00",age:"-"},{name:"2019-04-01 18:00 - 2019-04-01 19:00",age:"-"}],split1:"200px",passwordInputType:"password",passwordInputSuffixIcon:"md-eye",fmData:{name:"",nick_name:"",department_ids:[],role_ids:[],department_names:"",email:"",sort:0,status:!0},hasceing:!1,cetitle:"增加用户",celoading:!1,tblLoading:!1,searchForm:{dept_ids:[],role_ids:[],keywords:"",status:"",page:1,per_page:10},editIndex:-1,editName:"",editAge:"",editBirthday:"",editAddress:""}},methods:{handleDeleteUserOk(t){console.info("handleDeleteUserOk",t),this.$store.dispatch("admin/delete",t)},handleDeleteUserCancel(){console.info("handleDeleteUserCancel")},handleDepartmentSelectChange(t){console.info("handleDepartmentSelectChange"),console.info(t)},handleDepartmentTreeChange(t){if(t.length){let e=[],a=[];t.forEach(t=>{e.push(t.name),a.push(t.id)}),this.fmData.department_ids=a,this.fmData.department_names=e.join(",")}else this.fmData.department_ids=[],this.fmData.department_names=""},handleDepartmentChange(){console.info("handleDepartmentChange Hide")},handleToggleExpand(t){},renderContents(t,{root:e,node:a,data:s}){return t("span",{class:{"dept-span":!0},style:{display:"inline-block",width:"100%"}},[t("span",{style:{cursor:"pointer"}},[t("Icon",{props:{type:s.icon,color:this.getNodeTag(s.type)},style:{marginRight:"8px"}}),t("span",s.name)])])},renderContent(t,{root:e,node:a,data:s}){return t("span",{class:{"dept-span":!0},style:{display:"inline-block",width:"100%"}},[t("span",{style:{cursor:"pointer"}},[t("Icon",{props:{type:s.icon,color:this.getNodeTag(s.type)},style:{marginRight:"8px"}}),t("span",{style:{backgroundColor:!0===s.selected?"#d5e8fc":""},on:{click:()=>{s.selected=!s.selected;let t=this.$refs.leftDeptTree.getSelectedNodes(),e=[];t.length&&t.forEach((t,a)=>{e.push(t.id)}),this.searchForm.dept_ids=e,this.$store.dispatch("admin/lists",this.searchForm)}}},s.name),t("span",{style:{color:"#515a6e",marginLeft:"4px"}},`(${s.admins.length})`)])])},getNodeTag(t){return 1==t?"#2d8cf0":2==t?"#19be6b":"#f90"},initFmData(){this.fmData={name:"",nick_name:"",department_ids:[],role_ids:[],department_names:"",email:"",sort:0,status:!0}},handleTogglePassword(){"password"==this.passwordInputType?(this.passwordInputType="text",this.passwordInputSuffixIcon="md-eye-off"):(this.passwordInputType="password",this.passwordInputSuffixIcon="md-eye")},async handleCeOk(){this.celoading=!0,this.tblLoading=!0;let t=this.fmData.id?"admin/edit":"admin/create",e=this.fmData;e.filter=this.searchForm,await this.$store.dispatch(t,e),this.celoading=!1,this.tblLoading=!1},handleCeCancel(){console.info("handleCeCancel"),this.initFmData()},async handleCreate(){this.$Loading.start(),await store.dispatch("department/withCheckedDepartmentlists",{is_show_tree:1,has_admins:1}),this.$Loading.finish(),this.hasceing=!this.hasceing},async handlePageChange(t){this.tblLoading=!0,this.searchForm.page=t,await this.$store.dispatch("admin/lists",this.searchForm),this.tblLoading=!1},async handleSearch(){this.tblLoading=!0,await this.$store.dispatch("admin/lists",this.searchForm),this.tblLoading=!1},handlePageSizeChange(t){console.info("handlePageSizeChange",t)},handleSwitchStatusOk(t){t.status=!t.status,console.info("handleSwitchStatusOk",t)},handleSwitchStatusCancel(){console.info("handleSwitchStatusCancel")},handleStatusChange(t){console.info("handleStatusChange",t)},async handleEdit(t,e){this.$Loading.start(),await this.$store.dispatch("department/withCheckedDepartmentlists",{is_show_tree:1,has_admins:1,checked_department_ids:t.department_ids}),this.fmData=t,this.$Loading.finish(),this.hasceing=!0},handleSave(t){this.data[t].name=this.editName,this.data[t].age=this.editAge,this.data[t].birthday=this.editBirthday,this.data[t].address=this.editAddress,this.editIndex=-1},getBirthday(t){const e=new Date(parseInt(t)),a=e.getFullYear(),s=e.getMonth()+1,n=e.getDate();return`${a}-${s}-${n}`}}},r=o,d=(a("6ffe"),a("2877")),c=Object(d["a"])(r,s,n,!1,null,null,null);e["default"]=c.exports},6098:function(t,e,a){},"6ffe":function(t,e,a){"use strict";var s=a("6098"),n=a.n(s);n.a},"724a":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{class:t.classes,style:t.styles,on:{click:t.handleClick}},[t._v("\n    "+t._s(t.datetime)+"\n")])},n=[];const i="vpd-tbl-datetime";var l={name:"TableDatetime",directives:{},components:{},props:{datetime:{type:String},width:{default:"",type:[String,Number]}},data(){return{prefixCls:i}},computed:{classes(){return[`${i}`]},styles(){let t={};return this.width&&(t.width=`${this.width}px`),t}},methods:{handleClick(){console.info("handleClick")}},mounted(){},beforeDestroy(){}},o=l,r=(a("e256"),a("2877")),d=Object(r["a"])(o,s,n,!1,null,"21720e9c",null),c=d.exports;e["a"]=c},b269:function(t,e,a){},e256:function(t,e,a){"use strict";var s=a("b269"),n=a.n(s);n.a}}]);
//# sourceMappingURL=ims.umd.min.4.js.map