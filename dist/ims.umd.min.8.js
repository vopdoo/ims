(("undefined"!==typeof self?self:this)["webpackJsonpims"]=("undefined"!==typeof self?self:this)["webpackJsonpims"]||[]).push([[8],{"26f99":function(e,t,n){"use strict";var o=n("c0b7"),i=n.n(o);i.a},5730:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Row",{attrs:{gutter:32}},[n("Col",{attrs:{span:"20"}},[e._v("\n             \n        ")]),n("Col",{staticClass:"list-tlbr",attrs:{span:"4"}},[n("Button",{attrs:{type:"success"},on:{click:e.addTopMenu}},[e._v("增加顶级节点")])],1)],1),n("Tree",{attrs:{data:e.nodes,render:e.renderContent}}),n("Modal",{attrs:{title:e.title,loading:e.loading,"class-name":"ce-modal","mask-closable":!1,scrollable:!0},on:{"on-ok":e.saveMenu,"on-cancel":e.cancelAddMenu},model:{value:e.is_add_menuing,callback:function(t){e.is_add_menuing=t},expression:"is_add_menuing"}},[n("Form",{ref:"menuFm",attrs:{model:e.menuFm,"label-position":"top",rules:e.menuFmRules}},[n("FormItem",{attrs:{label:"类型",prop:"type"}},[n("Select",{attrs:{placeholder:"类型"},on:{"on-change":e.typeChange},model:{value:e.menuFm.type,callback:function(t){e.$set(e.menuFm,"type",t)},expression:"menuFm.type"}},e._l(e.typeList,function(t){return n("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1),n("FormItem",{attrs:{label:"名称"}},[n("Input",{attrs:{placeholder:"名称"},model:{value:e.menuFm.name,callback:function(t){e.$set(e.menuFm,"name",t)},expression:"menuFm.name"}})],1),n("FormItem",{attrs:{label:"标识"}},[n("Input",{attrs:{placeholder:"标识"},model:{value:e.menuFm.code,callback:function(t){e.$set(e.menuFm,"code",t)},expression:"menuFm.code"}})],1),1==e.menuFm.type?n("div",[n("FormItem",{attrs:{label:"路由名称"}},[n("Input",{attrs:{placeholder:"路由名称"},model:{value:e.menuFm.options.name,callback:function(t){e.$set(e.menuFm.options,"name",t)},expression:"menuFm.options.name"}})],1),n("FormItem",{attrs:{label:"路由路径"}},[n("Input",{attrs:{placeholder:"路由路径"},model:{value:e.menuFm.options.path,callback:function(t){e.$set(e.menuFm.options,"path",t)},expression:"menuFm.options.path"}})],1)],1):e._e(),n("FormItem",{attrs:{label:"图标"}},[n("Input",{attrs:{placeholder:"图标"},model:{value:e.menuFm.icon,callback:function(t){e.$set(e.menuFm,"icon",t)},expression:"menuFm.icon"}})],1),n("FormItem",{attrs:{label:"排序"}},[n("InputNumber",{attrs:{max:9999,min:0,placeholder:"排序值 越小越靠前"},model:{value:e.menuFm.sort,callback:function(t){e.$set(e.menuFm,"sort",t)},expression:"menuFm.sort"}})],1),n("Alert",{attrs:{closable:""}},[e._v(e._s(e.menuFm))])],1)],1)],1)},i=[],a=n("5176"),s=n.n(a),r=(n("7f7f"),n("cebc")),l=(n("96cf"),n("3b8d")),u=n("2f62"),m={name:"Node",created:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("node/lists",{is_show_tree:1});case 2:return e.next=4,this.$store.dispatch("system/changeSpining",{spining:!1});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),computed:Object(r["a"])({},Object(u["c"])({nodes:"node/nodes"})),data:function(){var e=this,t=function(t,n,o){if(!n)return o(new Error("值不能为空"));var i={type:t.field,value:n,id:e.menuFm.id};e.$store.dispatch("validateCode",i).then(function(e){e?o(new Error("已经存在了，请重新输入！")):o()})};return{title:"增加节点",typeList:[{value:1,label:"页面"},{value:2,label:"菜单"},{value:3,label:"操作"}],menuFm:{name:"",code:"",type:1,options:{tree_path:"0"},icon:"md-apps",sort:0,pid:0},loading:!0,menuFmRules:{name:[{required:!0,message:"菜单名称不能为空",trigger:"blur"},{type:"string",min:2,message:"至少2个字符",trigger:"blur"}],code:[{required:!0,message:"节点标识不能为空",trigger:"blur"},{type:"string",min:2,message:"至少2个字符",trigger:"blur"},{validator:t,trigger:"blur"}],sort:[{required:!1,type:"integer",message:"排序只能是数字",trigger:"blur"}]},is_add_menuing:!1,buttonProps:{size:"small"}}},methods:{getNodeTag:function(e){return 1==e?"#2d8cf0":2==e?"#19be6b":"#f90"},typeChange:function(e){console.info(e)},initFmData:function(){this.menuFm={name:"",code:"",type:1,options:{tree_path:"0"},icon:"md-apps",sort:0,pid:0}},createNode:function(e){console.info(e.id),e.id?(console.info("zi  node"),this.menuFm.pid=e.id,0===e.pid?this.menuFm.options.tree_path="".concat(e.id):this.menuFm.options.tree_path="".concat(e.options.tree_path,",").concat(e.id)):(console.info("add Top Node"),this.menuFm.type=2),this.title="增加节点",this.is_add_menuing=!0},editNode:function(e){this.title="编辑节点",this.menuFm={name:e.name,code:e.code,type:e.type,options:e.options,icon:e.icon,sort:0,pid:e.pid,id:e.id},this.is_add_menuing=!0},renderContent:function(e,t){var n=this,o=t.root,i=t.node,a=t.data;return a.expand=!0,e("span",{class:{"menus-span":!0},style:{display:"inline-block",width:"100%"}},[e("span",[e("Icon",{props:{type:a.icon,color:this.getNodeTag(a.type)},style:{marginRight:"8px"}}),e("span",a.name)]),e("span",{style:{display:"inline-block",float:"right",marginRight:"16px"}},[e("Button",{props:s()({},this.buttonProps,{icon:"ios-add",disabled:3==a.type}),style:{marginRight:"8px"},on:{click:function(){n.createNode(a)}}}),e("Button",{props:s()({},this.buttonProps,{icon:"ios-create-outline"}),style:{marginRight:"8px"},on:{click:function(){n.editNode(a)}}}),e("Poptip",{props:{confirm:!0,title:"确认要删除",transfer:!0},on:{"on-ok":function(){n.remove(o,i,a)}}},[e("Button",{props:s()({},this.buttonProps,{icon:"ios-remove",disabled:a.children&&!0})})])])])},addTopMenu:function(){this.initFmData(),this.createNode(this.menuFm)},cancelAddMenu:function(){this.initFmData()},saveMenu:function(){var e=this;this.$refs["menuFm"].validate(function(t){if(!t)return e.loading=!e.loading,!1;e.loading=!e.loading;var n="node/create";e.menuFm.id&&e.menuFm.id>0&&(n="node/edit"),e.$store.dispatch(n,e.menuFm).then(function(t){e.loading=!e.loading,e.cancelAddMenu(),e.is_add_menuing=!1}).catch(function(t){return e.loading=!e.loading,e.$Message.error("保存失败，请重试!"),!1})})},append:function(e){var t=e.children||[];t.push({title:"appended node",expand:!0}),this.$set(e,"children",t)},remove:function(e,t,n){this.$store.dispatch("node/delete",{id:n.id}).then(function(e){})}}},c=m,d=(n("26f99"),n("2877")),p=Object(d["a"])(c,o,i,!1,null,null,null);t["default"]=p.exports},c0b7:function(e,t,n){}}]);
//# sourceMappingURL=ims.umd.min.8.js.map