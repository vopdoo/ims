(("undefined"!==typeof self?self:this)["webpackJsonpims"]=("undefined"!==typeof self?self:this)["webpackJsonpims"]||[]).push([[5],{"724a":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{class:e.classes,style:e.styles,on:{click:e.handleClick}},[e._v("\n    "+e._s(e.datetime)+"\n")])},s=[];const r="vpd-tbl-datetime";var o={name:"TableDatetime",directives:{},components:{},props:{datetime:{type:String},width:{default:"",type:[String,Number]}},data(){return{prefixCls:r}},computed:{classes(){return[`${r}`]},styles(){let e={};return this.width&&(e.width=`${this.width}px`),e}},methods:{handleClick(){console.info("handleClick")}},mounted(){},beforeDestroy(){}},i=o,l=(a("e256"),a("2877")),c=Object(l["a"])(i,n,s,!1,null,"21720e9c",null),d=c.exports;t["a"]=d},ae22:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%"}},[a("Row",{attrs:{type:"flex",justify:"space-between",align:"top"}},[a("Col",{attrs:{span:"20"}},[a("Form",{staticClass:"search-form",attrs:{model:e.searchForm,inline:""}},[a("FormItem",[a("Select",{staticStyle:{width:"100px"},attrs:{clearable:"",placeholder:"状态"},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},e._l(e.statusList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v("\n                            "+e._s(t.label)+"\n                        ")])}),1)],1),a("FormItem",[a("Input",{staticClass:"filter-kws",attrs:{search:"",placeholder:"角色名称/标识代码"},on:{"on-search":e.handleSearch},model:{value:e.searchForm.keywords,callback:function(t){e.$set(e.searchForm,"keywords",t)},expression:"searchForm.keywords"}})],1)],1)],1),a("Col",{staticClass:"list-tlbr",attrs:{span:"4"}},[a("Button",{on:{click:e.handleCreate}},[e._v("添加")])],1)],1),a("Table",{attrs:{columns:e.columns,data:e.roles.data,"tooltip-theme":"light",border:"",loading:e.tblLoading},scopedSlots:e._u([{key:"name",fn:function(t){var n=t.row;t.index;return[a("span",[e._v(e._s(n.name))])]}},{key:"code",fn:function(t){var n=t.row;t.index;return[a("span",[e._v(e._s(n.code))])]}},{key:"nick_name",fn:function(t){var n=t.row;t.index;return[a("span",[e._v(e._s(n.email))])]}},{key:"email",fn:function(t){var n=t.row;t.index;return[a("span",[e._v(e._s(n.email))])]}},{key:"status",fn:function(t){var n=t.row;t.index;return[a("i-switch",{attrs:{size:"large"},model:{value:n.status,callback:function(t){e.$set(n,"status",t)},expression:"row.status"}},[a("span",{attrs:{slot:"open"},slot:"open"},[e._v("启用")]),a("span",{attrs:{slot:"close"},slot:"close"},[e._v("禁用")])])]}},{key:"action",fn:function(t){var n=t.row,s=t.index;return[a("Button",{attrs:{size:"small",type:"text"},on:{click:function(t){return e.handleEdit(n,s)}}},[e._v("编辑")]),a("Poptip",{attrs:{confirm:"",transfer:!0,title:"确认要删除此角色？"},on:{"on-ok":function(t){return e.handleDeleteRoleOk(n)},"on-cancel":e.handleDeleteRoleCancel}},[a("Button",{attrs:{size:"small",type:"text"}},[e._v("删除")])],1)]}},{key:"created_at",fn:function(e){var t=e.row;e.index;return a("TableDatetime",{staticStyle:{width:"500px"},attrs:{datetime:t.created_at}})}},{key:"updated_at",fn:function(e){var t=e.row;e.index;return a("TableDatetime",{attrs:{datetime:t.updated_at}})}}])}),a("Row",{staticStyle:{"margin-top":"10px"},attrs:{type:"flex"}},[a("Col",{attrs:{span:"8"}}),a("Col",{staticClass:"list-tb-right",attrs:{span:"16"}},[a("Page",{attrs:{total:e.roles.meta.total,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":e.handlePageChange,"on-page-size-change":e.handlePageSizeChange}})],1)],1),a("Modal",{attrs:{title:e.cetitle,loading:e.celoading,"class-name":"ce-modal",width:"600","mask-closable":!1,scrollable:!0},on:{"on-ok":e.handleCeOk,"on-cancel":e.handleCeCancel},model:{value:e.hasceing,callback:function(t){e.hasceing=t},expression:"hasceing"}},[a("Form",{attrs:{model:e.fmData,"label-position":"top"}},[a("FormItem",{attrs:{label:"名称"}},[a("Input",{attrs:{placeholder:"名称"},model:{value:e.fmData.name,callback:function(t){e.$set(e.fmData,"name",t)},expression:"fmData.name"}})],1),a("FormItem",{attrs:{label:"标识代码"}},[a("Input",{attrs:{placeholder:"标识代码"},model:{value:e.fmData.code,callback:function(t){e.$set(e.fmData,"code",t)},expression:"fmData.code"}})],1),a("FormItem",{attrs:{label:"部门（可多选）"}},[a("Tree",{attrs:{data:e.depts,"check-strictly":!0,render:e.renderContent,"show-checkbox":""},on:{"on-check-change":e.handleDepartmentTreeChange}})],1),a("FormItem",{attrs:{label:"授权（可多选）"}},[a("Tree",{ref:"authorizationNodeTree",attrs:{data:e.nodes,"check-strictly":!1,render:e.renderNodeContent,"show-checkbox":""},on:{"on-check-change":e.handleNodeTreeChange}})],1),a("Row",{attrs:{gutter:32}},[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"排序"}},[a("InputNumber",{attrs:{max:9999,min:0,placeholder:"排序值 越小越靠前"},model:{value:e.fmData.sort,callback:function(t){e.$set(e.fmData,"sort",t)},expression:"fmData.sort"}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"状态"}},[a("i-switch",{attrs:{size:"large"},model:{value:e.fmData.status,callback:function(t){e.$set(e.fmData,"status",t)},expression:"fmData.status"}},[a("span",{attrs:{slot:"open"},slot:"open"},[e._v("开启")]),a("span",{attrs:{slot:"close"},slot:"close"},[e._v("关闭")])])],1)],1)],1),a("FormItem",{attrs:{label:"备注"}},[a("Input",{attrs:{type:"textarea",rows:4,placeholder:"备注"},model:{value:e.fmData.remark,callback:function(t){e.$set(e.fmData,"remark",t)},expression:"fmData.remark"}})],1)],1)],1)],1)},s=[],r=a("e814"),o=a.n(r),i=(a("7f7f"),a("ac6a"),a("cebc")),l=(a("96cf"),a("3b8d")),c=a("2f62"),d=a("278b"),h=a("724a"),u={name:"Admin",components:{TableDatetime:h["a"]},created:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("role/lists");case 2:return e.next=4,this.$store.dispatch("system/changeSpining",{spining:!1});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),computed:Object(i["a"])({},Object(c["c"])({roles:"role/lists",depts:"department/depts",nodes:"node/nodes",statusList:"role/statusList",columns:"role/columns"})),data:function(){return{spinShow:!0,fmData:{name:"",code:"",department_ids:[],department_names:"",node_ids:[],node_names:"",sort:0,remark:"",status:!0},hasceing:!1,cetitle:"增加角色",celoading:!1,tblLoading:!1,searchForm:{keywords:"",status:"",page:1,per_page:10}}},methods:{handleDeleteRoleOk:function(e){console.info("handleDelethandleDeleteRoleOkeUserOk",e),this.$store.dispatch("role/delete",e)},handleDeleteRoleCancel:function(){},handleDepartmentSelectChange:function(e){console.info("handleDepartmentSelectChange"),console.info(e)},initFmData:function(){this.fmData={name:"",code:"",department_ids:[],department_names:"",node_ids:[],node_names:"",sort:0,remark:"",status:!0}},handleDepartmentTreeChange:function(e){if(e.length){var t=[],a=[];e.forEach(function(e){t.push(e.name),a.push(e.id)}),this.fmData.department_ids=a,this.fmData.department_names=t.join(",")}else this.fmData.department_ids=[],this.fmData.department_names=""},handleNodeTreeChange:function(e){if(e.length){var t=[],a=[];e.forEach(function(e){t.push(e.name),a.push(e.id)}),this.fmData.node_ids=a,this.fmData.node_names=t.join(",")}else this.fmData.node_ids=[],this.fmData.node_names=""},renderNodeContent:function(e,t){t.root,t.node;var a=t.data;return e("span",{class:{"dept-span":!0},style:{display:"inline-block",width:"100%"}},[e("span",{style:{cursor:"pointer"}},[e("Icon",{props:{type:a.icon,color:this.getNodeTag(a.type)},style:{marginRight:"8px"}}),e("span",{style:{backgroundColor:!0===a.selected?"#d5e8fc":""},on:{}},a.name)])])},renderContent:function(e,t){t.root,t.node;var a=t.data;return e("span",{class:{"dept-span":!0},style:{display:"inline-block",width:"100%"}},[e("span",{style:{cursor:"pointer"}},[e("Icon",{props:{type:a.icon,color:this.getNodeTag(a.type)},style:{marginRight:"8px"}}),e("span",{style:{backgroundColor:!0===a.selected?"#d5e8fc":""},on:{}},a.name),e("span",{style:{color:"#515a6e",marginLeft:"4px"}},"(".concat(a.admins.length,")"))])])},handleCeOk:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.celoading=!0,this.tblLoading=!0,t=this.fmData.id?"role/edit":"role/create",a=this.fmData,a.filter=this.searchForm,e.next=7,this.$store.dispatch(t,a);case 7:this.celoading=!1,this.tblLoading=!1;case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleCeCancel:function(){console.info("handleCeCancel"),this.initFmData()},getNodeTag:function(e){return 1==e?"#2d8cf0":2==e?"#19be6b":"#f90"},handleCreate:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.$Loading.start(),e.next=3,d["a"].dispatch("department/withCheckedDepartmentlists",{is_show_tree:1,has_admins:1});case 3:return e.next=5,d["a"].dispatch("node/lists",{is_show_tree:1});case 5:this.$Loading.finish(),this.hasceing=!this.hasceing;case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handlePageChange:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.tblLoading=!0,this.searchForm.page=t,e.next=4,this.$store.dispatch("role/lists",this.searchForm);case 4:this.tblLoading=!1;case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),handleSearch:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.tblLoading=!0,e.next=3,this.$store.dispatch("role/lists",this.searchForm);case 3:this.tblLoading=!1;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handlePageSizeChange:function(e){console.info("handlePageSizeChange",e)},handleSwitchStatusOk:function(e){e.status=!e.status,console.info("handleSwitchStatusOk",e)},handleSwitchStatusCancel:function(){console.info("handleSwitchStatusCancel")},handleStatusChange:function(e){console.info("handleStatusChange",e)},handleEdit:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.$Loading.start(),e.next=3,this.$store.dispatch("department/withCheckedDepartmentlists",{is_show_tree:1,has_admins:1,checked_department_ids:t.department_ids});case 3:return e.next=5,this.$store.dispatch("node/lists",{is_show_tree:1,checked_node_ids:t.node_ids});case 5:this.fmData=t,this.$Loading.finish(),this.hasceing=!0;case 8:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}(),handleSave:function(e){this.data[e].name=this.editName,this.data[e].age=this.editAge,this.data[e].birthday=this.editBirthday,this.data[e].address=this.editAddress,this.editIndex=-1},getBirthday:function(e){var t=new Date(o()(e)),a=t.getFullYear(),n=t.getMonth()+1,s=t.getDate();return"".concat(a,"-").concat(n,"-").concat(s)}}},m=u,p=a("2877"),f=Object(p["a"])(m,n,s,!1,null,null,null);t["default"]=f.exports},b269:function(e,t,a){},e256:function(e,t,a){"use strict";var n=a("b269"),s=a.n(n);s.a}}]);
//# sourceMappingURL=ims.umd.min.5.js.map