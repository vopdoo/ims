{"version":3,"sources":["webpack://ims/./src/views/Login.vue?74be","webpack://ims/src/views/Login.vue","webpack://ims/./src/views/Login.vue?4c5c","webpack://ims/./src/views/Login.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","class","classes","wrapClasses","attrs","id","headerClasses","_v","_s","title","slogan","bodyClasses","ref","staticClass","model","loginForm","rules","ruleValidate","prop","element-id","prefix","placeholder","value","callback","$$v","$set","expression","type","passwordInputType","icon","passwordInputSuffixIcon","on","on-click","showPwd","content","placement","forgetPasswordClasses","loading","logining","long","click","$event","login","size","fix","_e","staticRenderFns","prefixCls","Loginvue_type_script_lang_js_","name","computed","Object","objectSpread","concat","vuex_esm","is_logined","routers","created","_created","asyncToGenerator","regeneratorRuntime","mark","_callee","wrap","_context","prev","next","$store","dispatch","spinShow","stop","apply","arguments","data","account","password","rememb","required","message","trigger","methods","_this","$refs","validate","valid","then","$router","addRoutes","path","redirect","push","$Message","error","catch","views_Loginvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"ims.umd.min.11.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.classes},[_c('div',{class:_vm.wrapClasses,attrs:{\"id\":\"login-fm\"}},[_c('div',{class:_vm.headerClasses},[_c('h1',[_vm._v(_vm._s(_vm.title))]),_c('p',[_vm._v(_vm._s(_vm.slogan))])]),_c('div',{class:_vm.bodyClasses},[_c('Form',{ref:\"loginForm\",staticClass:\"login-form\",attrs:{\"model\":_vm.loginForm,\"rules\":_vm.ruleValidate}},[_c('FormItem',{attrs:{\"prop\":\"account\"}},[_c('Input',{attrs:{\"element-id\":\"account\",\"prefix\":\"ios-contact\",\"placeholder\":\"账号/邮箱/手机号\"},model:{value:(_vm.loginForm.account),callback:function ($$v) {_vm.$set(_vm.loginForm, \"account\", $$v)},expression:\"loginForm.account\"}})],1),_c('FormItem',{attrs:{\"prop\":\"password\"}},[_c('Input',{attrs:{\"element-id\":\"password\",\"type\":_vm.passwordInputType,\"prefix\":\"ios-unlock\",\"icon\":_vm.passwordInputSuffixIcon,\"placeholder\":\"密码\"},on:{\"on-click\":_vm.showPwd},model:{value:(_vm.loginForm.password),callback:function ($$v) {_vm.$set(_vm.loginForm, \"password\", $$v)},expression:\"loginForm.password\"}})],1),_c('FormItem',[_c('Tooltip',{attrs:{\"content\":\"请勿在公共场所使用\",\"placement\":\"right\"}},[_c('Checkbox',{model:{value:(_vm.loginForm.rememb),callback:function ($$v) {_vm.$set(_vm.loginForm, \"rememb\", $$v)},expression:\"loginForm.rememb\"}},[_vm._v(\"记住密码\")])],1),_c('Tooltip',{class:_vm.forgetPasswordClasses,attrs:{\"placement\":\"right\",\"content\":\"忘记密码请联系管理员\"}},[_c('span',[_vm._v(\" 忘记密码？ \")])])],1),_c('FormItem',[_c('Button',{attrs:{\"type\":\"success\",\"loading\":_vm.logining,\"long\":\"\"},on:{\"click\":function($event){return _vm.login('loginForm')}}},[_vm._v(\"登录\")])],1)],1)],1)]),(_vm.spinShow)?_c('Spin',{attrs:{\"size\":\"large\",\"fix\":\"\"}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div :class=\"classes\">\n        <div id=\"login-fm\" :class=\"wrapClasses\">\n            <div :class=\"headerClasses\">\n                <h1>{{title}}</h1>\n                <p>{{slogan}}</p>\n            </div>\n            <div :class=\"bodyClasses\">\n                <Form ref=\"loginForm\" :model=\"loginForm\" class=\"login-form\" :rules=\"ruleValidate\">\n                    <FormItem prop=\"account\">\n                        <Input element-id=\"account\" v-model=\"loginForm.account\" prefix=\"ios-contact\"\n                               placeholder=\"账号/邮箱/手机号\"/>\n                    </FormItem>\n                    <FormItem prop=\"password\">\n                        <Input element-id=\"password\"\n                               @on-click=\"showPwd\"\n                               v-model=\"loginForm.password\"\n                               :type=\"passwordInputType\"\n                               prefix=\"ios-unlock\"\n                               :icon=\"passwordInputSuffixIcon\"\n                               placeholder=\"密码\"\n                        />\n                    </FormItem>\n                    <FormItem>\n                        <Tooltip content=\"请勿在公共场所使用\" placement=\"right\">\n                            <Checkbox v-model=\"loginForm.rememb\">记住密码</Checkbox>\n                        </Tooltip>\n                        <Tooltip :class=\"forgetPasswordClasses\" placement=\"right\" content=\"忘记密码请联系管理员\">\n                            <span> 忘记密码？ </span>\n                        </Tooltip>\n                    </FormItem>\n                    <FormItem>\n                        <Button type=\"success\" :loading=\"logining\" long @click=\"login('loginForm')\">登录</Button>\n                    </FormItem>\n                </Form>\n            </div>\n        </div>\n        <Spin size=\"large\" fix v-if=\"spinShow\"></Spin>\n\n    </div>\n</template>\n\n<script>\n    import {mapGetters} from 'vuex'\n    import { mapActions } from 'vuex'\n    import _  from 'lodash';\n    // console.info(_.now());\n\n    const prefixCls = 'ims-login';\n\n    export default {\n        name: \"Login\",\n        computed: {\n            classes() {\n                return [\n                    `${prefixCls}`,\n                ];\n            },\n            wrapClasses() {\n                return [\n                    `${prefixCls}-wrap`,\n                    {}\n                ];\n            },\n            headerClasses() {\n                return `${prefixCls}-header`;\n            },\n            bodyClasses() {\n                return `${prefixCls}-body`;\n            },\n            forgetPasswordClasses() {\n                return `${prefixCls}-forget-password`;\n            },\n\n            ...mapGetters({\n                'title': 'login/title',\n                'slogan': 'login/slogan',\n                'logining': 'login/logining',\n                'is_logined': 'login/is_logined',\n                'routers': 'login/routers',\n            })\n        },\n        async created() {\n            await this.$store.dispatch('login/loginInfo', {});\n\n            this.spinShow = false;\n        },\n        data() {\n            return {\n\n                spinShow: true,\n                loading: false,\n                passwordInputType: 'password',\n                passwordInputSuffixIcon: 'md-eye',\n                loginForm: {\n                    account: 'cw001@163.com',\n                    password: '123456',\n                    rememb: false\n                },\n                ruleValidate: {\n                    account: [\n                        {required: true, message: '请输入登录账号', trigger: 'blur'}\n                    ],\n                    password: [\n                        {required: true, message: '请输入登录密码', trigger: 'blur'}\n                    ]\n                }\n            }\n        },\n\n        methods: {\n            ...mapActions('db', [\n                'database',\n            ]),\n\n            showPwd() {\n                if (this.passwordInputType == 'password') {\n                    this.passwordInputType = 'text';\n                    this.passwordInputSuffixIcon = 'md-eye-off';\n                } else {\n                    this.passwordInputType = 'password';\n                    this.passwordInputSuffixIcon = 'md-eye';\n                }\n            },\n            login(name) {\n                this.$refs[name].validate((valid) => {\n                    if (valid) {\n                        this.$store.dispatch('login/login', this.loginForm).then(() => {\n                            if (this.is_logined) {\n                                this.$router.addRoutes(this.routers.concat([{\n                                    path: '*',\n                                    redirect: '/404'\n                                }]));\n                                // sessionStorage.setItem('test','vvvv');\n                                this.$router.push('/admin');\n                            } else {\n                                this.$Message.error('账号或密码错误!');\n                            }\n                        }).catch(error => {\n                            this.$Message.error('登录失败请重新登录!');\n                            // console.info('catch -- error',error);\n                        });\n                    } else {\n                        // this.$Message.error('请正确输入账号密码');\n                    }\n                })\n\n            }\n        }\n    }\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/iview-loader/index.js??ref--0-2!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/iview-loader/index.js??ref--0-2!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=7e4720e8&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}